/**
 * @Author: sheldon
 * @Date: 2024-04-23 13:02:36
 * @Last Modified by: sheldon
 * @Last Modified time: 2024-04-23 13:53:15
 */

import fs from 'fs';
import path from 'path';

import {Contract} from 'ethers';

import {arbiBatchProvider, columnSeparator} from '../../../server/mongo/quoll/util';

// ref: https://arbiscan.io/address/0x245f1d70AcAaCD219564FCcB75f108917037A960#readProxyContract
// users of 'Staked' event, crawl with contrarc-lab: https://nextnet.equilibria.fi/contract-lab
const holders = [
    '0x19BdF78e55C25Ec20dcCbbD434fBA4A34E964c0f',
    '0xCc0AC052851e220f2F0591B75257329A667D76a3',
    '0x7EE54ab0f204bb3A83DF90fDd824D8b4abE93222',
    '0x4334703B0B74E2045926f82F4158A103fCE1Df4f',
    '0xE302fD7564e20B56FdAcE48fD21dCA17E28F4D49',
    '0xa897585CA534cd1DB06C7656d047a2D4C56a3e1c',
    '0x4C6062eDa9d53D749E6E1aB1676b27aA5730C03f',
    '0xA2490947b30258b522B7D6fD8Fabec2d21c42D57',
    '0xc926dDba8b7617dbC65712F20cF8E1B58B8598D3',
    '0xa6FB1a1fFF573466295ed477219CA1419bC9A400',
    '0x864DE5bbaf4b8c808E94a8385B95B0855d170137',
    '0x3750a58F96cc192CE18117C15dB7ACAeF36a0D7B',
    '0x2d5cf6A8d819459E1C47A950b0369904c85A72B5',
    '0x02B72485EcdAabD5F9af68D9A5d2b2CA54d5339B',
    '0xa5edc5FB0F40A2d8a33532f26b19c0EFA927c893',
    '0x359b9260F1887da760D69A7eb0FF31f542438631',
    '0xe7e169d87B2B225478E4D23c10328919d600C4AF',
    '0x3A39899DC78b7307aCd83f51463C853Fa79E1B09',
    '0xb9966663aeA8E8192880C3A3b9A539042202501a',
    '0xdf1F5666c5E70a7fA0bb89717947a1FEcC245fe2',
    '0x7b0bBc04483951Edf46075Ba1C7A0c6A54496181',
    '0x343B09FDEf343299848917297E1e319Ed7fE9988',
    '0x43cd745Bd5FbFc8CfD79ebC855f949abc79a1E0C',
    '0x015448357a85E8423117F45f9a870DE126643e82',
    '0x686D0B34ed6F01F12526612Ae234bc52b64e0579',
    '0x8907bD00491d0b830C38276AcC6D72E2419135A2',
    '0xD93939c5cd996c56349d32c62671E15621BaDa2B',
    '0xEa5e723aCd5E9F15e88EA0a828f27E9dA2ccB9b1',
    '0x51eBf5723c2Cf262F3d1b40b1D90eB416F9b4867',
    '0x5c9d09716404556646B0B4567Cb4621C18581f94',
    '0x6C01ec9622e50799d62ca076F2e2aa34DC840D5B',
    '0x8922C99060ddd3654274F92cB4b50B7BA66b1C29',
    '0x0D7577AF002dE62977Ae343231E2B77c606345D7',
    '0x1B9eFC107d3cBC3D56060dF25b20e203732A1FB0',
    '0x3c2673DE800A580026404d5d8d0D04Be73632e15',
    '0x95c14C058Aaffda687780eB60Ef8658EF1166578',
    '0xABcAe081dc0D143AeFe3fEF2EFB70Dc756b64007',
    '0x4e6056D8e8c49F4278C4b13E77C8c39D363B26C6',
    '0x21934207F6BCd708349cB221486fBAD9eAD96E0F',
    '0x8Ac286Ff7a2703Ee4BeD827450EA7a48b3353886',
    '0xaa3fFE470e3F3b8A23c57DDD7BED321172E5307e',
    '0x699Fcc3e5590605e5e4b33e46b60bafb93556D62',
    '0x6D9BF03020EFaEFA9248CE88ac326a4F64f764aA',
    '0xa8a693105E49489FCD0C588894079830E7288853',
    '0xbc2E07a461ef6194545c4BBAd0e3F64679331eA9',
    '0x09Fa38EBa245bb68354B8950FA2fe71f02863393',
    '0x95Beabdf2Ff4F5fa35CD90ecfa5953c9242FfDCD',
    '0x1395DE9DaeC52Ad405e945603eA0a9346d00d01C',
    '0x851ef0A28922435675c77D505601E625F65fF088',
    '0x281C76C0F963eE60B1ACa4420d5b49D407F2C075',
    '0xB0399dAC8f4D4100b49b2a7B3873481114229D18',
    '0xc5150Ee35Bbd51F9B1A6EE0D7A0A6f9BD8E96E75',
    '0xDfaa204F863B750744C2754f83C410d85Ba75f2B',
    '0xc40F6f6ade14DE9AA40e5a868aA8db4ae2aB5Be4',
    '0xC7Fdc072E1a7Ab725cCd0293e826c0143c7919b1',
    '0x701e6e0c311bE459495082F2AD9c79f4BB5B983b',
    '0xbDB910984f263fF8Cb96EE765067a8f95e0eD587',
    '0xc024AB601BA1e9986e6A22D4582257C0F93fBAfc',
    '0xbE160f86C4e6C989874F4a1b022852a15bfC3c14',
    '0x1E969e701633C95A922dC98543629c663FbB0B3F',
    '0x8Ee27170Ef32256dc4Db4b41617455dB45478ED5',
    '0xAF556c7284150914cb4bdc0963Be15Bb932A5E2E',
    '0x11d67Fa925877813B744aBC0917900c2b1D6Eb81',
    '0x5455A28F1D5116610C3627FCb672d165D553D018',
    '0x682071998C18D3D98F286DBE347Ce24c97CCB6CB',
    '0x76E93F89220A36a8666052A8E7a7d8a40Ba3dE1B',
    '0x0a04C869D4d48E3D4659260bf61CeB8df95DFAA3',
    '0x50Cd4175e0Bb2cc85C225911096dbDd01Dd14926',
    '0xB512DdB203cb1b46D59D66E1F90f243F7B831D90',
    '0x4d72dCd0403Ef2D01b3Cf86df7a993202eB2F69a',
    '0xf11A8dBd750b00e69A93aCd0206123105866Ec52',
    '0x2db52B3AF8d3049921Fe3E61305732E59584E83F',
    '0x1D45Bb8BED544293C1AFbe9569e96E9963D30ED2',
    '0x9065640d75a92b9853A32DEfc4D96D255D462Ab6',
    '0x69B2b47Ab61461D655dd6B70367E64349296D81A',
    '0x8D773BC4AD395Be0A75cC33a4a915eA1b938Ac30',
    '0x835762E2ea797B067417292953C82897e853D561',
    '0x4e53b09defF702999651F151a7C62091C08F16B8',
    '0x72BB309F74237041762c312284cEcCc7CE48d24A',
    '0x3148308853361E4315AE7CF9ede7822B67D9Af59',
    '0xEBf2adB3df7B75FE724b206A6609bf9Fb63c8437',
    '0x4F50B5Aec2e3D4fb0a3e0F1F93621A90210597ee',
    '0x6c7286c5AB525ccD92c134c0dCDfDdfcA018B048',
    '0x00EeF0E5B85B7980971B029D22b53F3De468f361',
    '0x7bC00be5a427B43a703D91E38754A7E0be1e5341',
    '0xB8Bd8f4c420ada4D999F2619503d5aaa139eD7C2',
    '0x32f8c8b40b62A73D514E8bE0f58074eDBA533937',
    '0x662413a2A77CF8C99F3707cf39B0A28eD3eDA403',
    '0xD814E1b7cC203ff6ca4358BF4aa3ce9771FedC68',
    '0xD407C6c9204ea4Afe302B554e0a1f220e573765D',
    '0x74308432777CF5eCE51b51C6751469d91c9B560F',
    '0x2A09861D6130F52F94B409B3183515cbde03b0db',
    '0x8CCfcfa7e6133E0875192974D0d857fB7A28375E',
    '0xF548a58DB6d86d466acd00Fc0F6De3b39Ea129D7',
    '0x111fbf7b389e024d09F35fb091D7D4479b321B0A',
    '0xc7e6DA4D1373BABa0033A9799470b3B4900f338C',
    '0x402904E954aebEE2E78b7B09595393cf05571333',
    '0x57c4122dA87217D952E385BD7143Ee030339BEe0',
    '0x619036E9d4dcD3190dEA46AB20BbE31B533ac8c0',
    '0x1984581062CD8388210A390e5FeFEC35c3e4d743',
    '0xa27F547849023E748e4a2E6EA9606723BD1a7565',
    '0x458DA031B0618EcB7E654c599b4CfAC96fE82536',
    '0xcf6862511797537EBF04ea5B16E08ce1826Ed413',
    '0x772763eF76A4eaaB741E600932f07556fC5f3BEA',
    '0x2bb8Ab3C2A9837de97A83c228A07E16928B4f07f',
    '0xb9BB838c957E3AFF35Ba4a8d881079076461D5A3',
    '0xAd67FB0FC851c498c45d9Eb67801931b9046928a',
    '0x62866dF7228148C9520F6bA851Ed1B788551ce81',
    '0x851783BdE7460261C0B289AbaBaa290c51dA11b0',
    '0xFCdD87D8B112fB5c655a6a95a939F8e2BE854449',
    '0xAf1Abc3Fad8e912765B4843Be32afBB50E26cD40',
    '0x8BBbcDd1807F0aA1661bB8e5C6859B1934A53A63',
    '0x5AD6C1D7D9B8b3c383d5f180bAe377516ff290eE',
    '0xa79C5621e0C85587068F8e91D3D15488DF6C3c1c',
    '0x45dfC03C18a8f10D99a1c1352f760aC524F86278',
    '0x5a1d3D13DC6042c850E18ad3b872D621356F3699',
    '0x58C54AF353Db01fDE14D8feb09E8c4bdA1773d2F',
    '0xeA04965Fc2cA0F62e4ca2446AfB0c25cCc9335C4',
    '0x99b25F2B6A5CcB8dc45EA07041F6CAF045D8eda5',
    '0x400e1caa1399E994d047fA5769958fC0e089cFE1',
    '0xC4B539EB23b40a496A0211771E8090d5347cD1A1',
    '0x6E11181Bfb52ae0BE0c1898898A7B4433A31672d',
    '0xCB38F5cD6e9eA980b50Faf618d75D3C9BC8F51F7',
    '0x2021dA0831881CF4D1F38308214996B46c508A8A',
    '0xBd1B3513Bb0Ce1529242Cfb28926618809592362',
    '0x34C2Bc4078d66303401Cc5dd601387C565F6C48a',
    '0x193Db18A5EF9a0320b7374C1fE8Af976235f3211',
    '0x3C9AAd80B153F8028EBB85Aa1641f94ff786caF2',
    '0x5Ea5a55be3C8C199244141F904857B0a389C218f',
    '0xE5343937b623EE0564FBB7F13eb1E93C4eF90a00',
    '0x1C7659c450da94Ac499911CE3F06EA41F9b21C7e',
    '0xe79c4a3807621F223De76404fB609B8a278e0262',
    '0xc991663FA798E5f27C854EE751285C23796EF6f6',
    '0xbDAe0E501C69791e080AC2e25a5591070e424beA',
    '0xcA908d05538387f6299Ac8b7134f1Aa52c797C30',
    '0xFab10aa58BF87A3499Bd5B603AF8C442FC48CbAC',
    '0xBf9ce8e7a637a18cDA7958CeA446681DB7987c7f',
    '0xcdDebA81384f9E327d703d235DD100f7C8bb2cB6',
    '0x01c020C8F90AebC4d8fCAC2ea1aCeC596DA4e01B',
    '0x2177B6F5665987CB9794B43c0DFA9d3e953A1e70',
    '0x79773898Dc4d58472f5032b417aE8AAf7812d988',
    '0xf0c84F763CA041f9A3353ffF74106909B65F29dF',
    '0x7a311935761cE31006DE95233B3f24367fA3BC12',
    '0x3E6fc92D4eDcd1156fe211eb4d3AeC1bAe2922Af',
    '0x0293AB78b78F686248CED4CB89C5F6BbA24B8015',
    '0x080B1b3e376B481404971086b0DDF7D0B8CA94f9',
    '0x936282E10cbCbF88c7A19e56ffe9Da2C0eea6bb0',
    '0x9E768DB96569d1D8812226f7C5c56A221B0F5476',
    '0x51CFb80d0C44adE0A1a5722f268d281fDFB04e33',
    '0x7877bab62B89e751fcD54A44F585DDB2f35f5Df9',
    '0x93015C413054c49BFcc55eb198Feaa234fdee1b8',
    '0x750E9A7b449904f47B793B805dB469FA6e025E33',
    '0xE95c608D80e2E08f398bCD0F85507b684B02705D',
    '0xbf6b306C10454dfAE83Dcc2Fc0187d60a60B69CC',
    '0x1164c231e14b33596b807761727a7F0796E8F5C2',
    '0x942E343e449D79161f21F4B2C1Ea28654E77ECe5',
    '0xEA3871fcDD47c06095b7ADe579E8365083dBb871',
    '0xb2a33ae0E07fD2ca8DBdE9545F6ce0b3234dc4e8',
    '0xc814856b25F211CFC261286FA25b9D111d01DD90',
    '0x6B765FD87BdEd589958ad50D24cd9208E8D9bF93',
    '0x531476Fbd5F58d6548C026ce54FBce2c45Fa416D',
    '0x10242AF6eB379A1bb6c6959028ea1BC62b5b5a0A',
    '0xbce317F72afcC17cfd22Ef54d74041A5f65BaA1c',
    '0x2C3BcaFA31DDE5C1ADCFA8B358fDD75B996290A0',
    '0x625B261E91efD5EC12ACe7a51d56B52B5040e8D9',
    '0x9A47d4588AfcD56F0c62E3999dB9BDbd544A5767',
    '0x04d03eB6C712052CC2F925732D6193Dd090C8a07',
    '0x96582746E2d7303A58446820c148a79C93ae298f',
    '0xd276419cE25d4Aa19598a39268547c535777d14A',
    '0xE292001F07318A99b36E28E59bD005B09A8c3781',
    '0xfB375d31a0BfeA345eD5D0E1b4662bFBDbBd1C62',
    '0xe87b6CD08411f261B168D07f3d031A0203f96f41',
    '0x17930F05c2819b119793537Dd5127515334e67E6',
    '0xAEdD53e2264771bE9F64ebd817A6d95B148626BA',
    '0xdBcB7aA886302dC4687De666d3B75Dea20A3E1dd',
    '0x314B5D93B7c564782fB454703e49E91C7dfEe2c1',
    '0x1d1af251Ef5c5ddAD0b831DF2052e77207635de4',
    '0x870aa098D943382d13B491B50C6b93876Eba1eEa',
    '0xA43693508654ea03A9ebBd32cfd4865bCac24b21',
    '0xd463E95765eeBC32cB8E551a26701bd50E6F4D55',
    '0x1df2c298D259e1D9FF068d95633E93734f588D41',
    '0xeBc281b20D24ccdA9cAbb0Eb36778cBE5e02A72A',
    '0x71A240F4fF7D2aAd954C8c748F5F2F387F5C08df',
    '0x9516cd25F6193B4e6b43553098411786F3D3f2C9',
    '0x9480fc2A527BB0F0e5E6A3CF2922BcD123B71302',
    '0x60A3D336c39e8faC40647142d3068780B4Bc4C93',
    '0xA8fd362654C5d22F76398C8A681d92c70dfFB8c1',
    '0xf0CBC75c021aF12CA3842b6301dBac269F358c4c',
    '0x7aF1A8eD846316c192D4418711134C76c1BbDDEf',
    '0x0EA41755EF53F8ECf448b0c19e05255F39E297eF',
    '0x9C50Ff007F06aa3774362dF1e62ECF73F6afDE33',
    '0x271E3409093f7ECffFB2a1C82e5E87B2ecB3E310',
    '0x32369C32113D6A85d4B71faA40DDd048187DCe79',
    '0x76d2DDCe6b781e66c4B184C82Fbf4F94346Cfb0D',
    '0xDEd2125D4921Eee216dA5564D47DdbE771B5266b',
    '0x0B646d7C0b1D63ffB1e3AF7fF99B235E5dE4bCe9',
    '0x4FF3AA332Fd6B1Ee6023FE71d67f595e5b515EA7',
    '0xBb4D0819089879d83ae13fEe71aBeAa345629389',
    '0x7306Da486eF680bdeda0B63C8040CB688bD997A8',
    '0x3ddE9e437241A83Fd9E97680500B830429e015BD',
    '0x4dFE30b42547aFD9C8c17Cf0c0bb30d3050e49Df',
    '0xc25d35024Dd497D3825115828994Bb08D12a3aa7',
    '0x596CDbB0d4b74Cb5dCdf86613d8012E0cD3E522f',
    '0x593A5C79F7fB72515D029FED69267a8cC8EDD010',
    '0xbDfA4f4492dD7b7Cf211209C4791AF8d52BF5c50',
    '0xE6A2C21fB54de06b619C0f69381ae496d7A3FdD4',
    '0xD4441aDbE09EB03e37d96C183Ef30C97Cc7F1f18',
    '0x76D3694F45b51DE17C468d3CFdB4724A4D308850',
    '0xBBaCb7F97BA96aa90E5603CFb47EaE09517C8731',
    '0xaEBCc707edac413af8782c5bB1A29A6B2d904719',
    '0x4d95C57f61f0edA120eC7F973cd8C5DAEf40c51A',
    '0x425f52B381301f6297154850b336A6598f4f1aeE',
    '0xD319026e160089129717a05cF44939ED29B3BDCb',
    '0x720F01DaaB0b5e159387DFF1CBFD4CBE5ce6238a',
    '0xEf47003F0E276eb0Fb60B626E80554DD7AdCdd11',
    '0x37C14240884086A671AC959E66c9fDc84D63331e',
    '0x9c57027B1eca93093a6F446422C59C85A5A3Fa52',
    '0x0645736eeCfE8B572cbabb885eAaDe641B659846',
    '0x192A4250F26669710d5166dCD80e6C60C7C91FA4',
    '0x1ee2ffA742FdBec532f8986463c2fEa50BB2185e',
    '0x79a96Df53D2D1B76C7B658C3e0E94BB30639befb',
    '0xBE0e19769fBd4B1a7251c771a4dfF920ae67562b',
    '0xC09Dc769A1bF45f4A86584f1007FfaE20ed9f17F',
    '0x62Acfb3ccf5fE16242d80840c354bD09D6ff44ee',
    '0xB1796E8f1eEcF23027c1E3C00fE303629A189d10',
    '0x3D0D8869Dab1719E50708bB4e744DD8AEa7A0DD2',
    '0xFfc8a753a19A66A57B9Cf046cb80Bb86cDC9727b',
    '0xA708662C3Ec26010f8ECA31c65b448ff8B946D20',
    '0xE2CA6bF9cBB498584e8c51Ea41B87F00A90E33ec',
    '0x72Edac30eD6F6918fe8186109B6106c292de6f3A',
    '0x6EbA9B16f1ED88041afC9646c010BBfC03e16e23',
    '0x489e383a21993251f2C73936B8e8e6965f10188d',
    '0x64C6741E8B33DDcE5774Ec6dE92CA287Ae464D1F',
    '0x021901b0679979963A1cfCEaAf142FAA2bb7f389',
    '0x48834D774953233d799c338300a82F56F88caF2C',
    '0xA93205ba7726F5B0Eb8d42fBeD2698c50B32D4d7',
    '0x7B198bd8CB439071447c585816db17081372f081',
    '0x2CFE09Bc6c90C1BDCB8a0566Da614ed45277c5C2',
    '0x1451b33df1067c74aa4D0D9058B944B44f62Ee0e',
    '0xed571Bc09617D5cAfAA8d041F1A7C61E8d3aF3ed',
    '0x0B3687CfA042e63024E2c39ed988A679507FAa39',
    '0x41472012159B318b63275D3945E69364BeCB3e64',
    '0x9E6Ad07BB7372D5441F5b34eEBf576334Db8E2Dc',
    '0xd2d049f99e4E6a130131509A079267ed5DcDF75a',
    '0xA5e349015d543EB56fA3905291095Bf7f9D44beb',
    '0xe3b44B20003523eF37afd5d011FF721d22d7e487',
    '0xdf4E06a49A4Df04606935723113150276360B443',
    '0x972b0F9cDE1266e860E546ac92E783741769400F',
    '0x471E7015922D208aD77F8E095F4439A0490Ed9c2',
    '0xf96C67F630427eca5E4828420F5f46956B1aB0a6',
    '0xA07D83334758Af046DbCEe6991E341C0E061d121',
    '0x198d47B21BC516061d4C0F68318BbAA3C8FD0854',
    '0x5D0aC389c669D6EFE3BA96B9878d8156f180C539',
    '0x943228378d4F29252Ddd317FAeE5b86E01cfF2B1',
    '0xCd064e5D6a477517FdC1EB30ff46eE593537DbEa',
    '0x4d13C400787974aff670F30E29ac3D212a03B418',
    '0x0a26C34f669e8A88180C46498a439592b388c6BE',
    '0x04eCA276ed3206F92fc117deea34B7b02D95a805',
    '0x5440AfC3ef2B0af19C358F9d519657a6cc5909e5',
    '0xB0238598feBC8F63475d398EE5fA7594E0E20D54',
    '0x208DBda1748BCaEDBbfd542c52fd732763f5E90a',
    '0xe06C41a09A5765094B39Cb6B32BeB72f6F52057e',
    '0x17F343182B42D6488FC54B6ae73ac5DA5Ad4E326',
    '0xCA02E6c2f0633E15977951fed564F818F853887D',
    '0xa2b12a72017E230ae0f10c5b3A1f0F71c0537636',
    '0xe02255C3d6221dC05E81d2196179D5192A1176bb',
    '0x88ca682c8DD3F6EE798d1dFaC3ac90799a54381C',
    '0x09c43Ad91571c7D7E683F60D44b5967ab6f3E8B2',
    '0xCeaDC651d0C6bB9153dE8dC8bc9647cc0BF6E834',
    '0xA25f67926bAe23e7F9cD6b4a12219a04fd7c0B19',
    '0x8F50B88d4d6F082aC02933888Cf588A5B89AE2ab',
    '0x7d137C86dC954F4eaDd38957a7Cd8a6007ce13C5',
    '0xFe51263Bd0d075Dc5441e89Ecd1F6D63fF41E02E',
    '0xB4972d071D728A18FCba0F56fdcF2b652ca24Dd6',
    '0x7937Db1aEa3a0ff0B5d9CE97e4c86CC1bE0b041c',
    '0x4eAAC96F2D275764AD7259C303fc932d8f6B1e49',
    '0xE1FfB45dD90889a4a70c2F0793a163e94f9aEcc2',
    '0x3681c31cf424E53f8B637161aB66c827D1dd2DF2',
    '0x485F3B006e662e588edCe3EeDA6611D2bb588eDf',
    '0x537ab709b03C5c7623DBC2e92b632018e05f57D4',
    '0xB3290c332460e93b57b41EA72fDF9c6ef8979C33',
    '0xf1BA1E8AB78bf53Cb4019E56200c6f2Bde3ef1D6',
    '0x73EcEB7feA2E7d320AC57fe472d86C75efa1E798',
    '0x1c902689fdc3868609bB219c8DAFD30fdc68fE86',
    '0xFf4B7380a217D34DDa7909281B9752698571AEC1',
    '0x1FFe2821CD751D5F769eAbDf811FBC12E6A40aA6',
    '0xD9638c35514F1D7Bc013E90b7C21C282e9ebc1AC',
    '0xb3a5100721204E06e50445607d57dee64dfC0b04',
    '0xf49769Bcce9e9De36330517Adc56A311646b714C',
    '0x4c4AFfeeb9b13CB9191e9778D24696BDb8d447f2',
    '0x2b41A5c6f06050a33cB08C05a2a11E668c197E19'
];
const abi = [
    'function balanceOf(address account) view returns (uint256)'
];

async function readBalance() {
    const contract = new Contract('0x245f1d70AcAaCD219564FCcB75f108917037A960', abi, arbiBatchProvider);
    const batchSize = 100;
    const holderBalanceMap: any = {};
    let start = 0;
    while (start < holders.length) {
        const end = start + batchSize;
        const batchHolders = holders.slice(start, end);
        console.log(`read balance ${start}-${end}`);
        await Promise.all(batchHolders.map(async holder => {
            let balance = '';
            try {
                balance = (await contract.balanceOf(holder)).toString();
            } catch (err) {
                console.log(`read balance ${holder} error`, err);
            }

            holderBalanceMap[holder] = balance;
        }));

        start = end;
    }

    console.log('read balance done');
    fs.writeFileSync(path.resolve(path.dirname(__filename), './eqb-pendle-lpt.csv'), Object.entries(holderBalanceMap).map(entries => entries.join(columnSeparator)).join('\n'));
}

readBalance();
